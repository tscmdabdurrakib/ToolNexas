import{r,j as e,co as K,cp as te,cq as le,cr as M,cs as re,aA as ne,a9 as ce,aa as ie,ab as oe,ac as de,am as me}from"./react-vendor-C8_0nm1e.js";import{c as i,C as f,b as w,d as T,e as xe,f as b,j as he,k as ue,l as C,m as R,L as A,I as S,B as L,A as je,p as pe}from"./tools-BmgH3g0u.js";import{R as H,z as fe,A as be,C as Ne,T as O,B as Y,D as ye,E as ge,X as ve,Y as we,F as $}from"./vendor-BVXzLTDY.js";const U=r.forwardRef(({className:s,...t},l)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:l,className:i("w-full caption-bottom text-sm",s),...t})}));U.displayName="Table";const V=r.forwardRef(({className:s,...t},l)=>e.jsx("thead",{ref:l,className:i("[&_tr]:border-b",s),...t}));V.displayName="TableHeader";const X=r.forwardRef(({className:s,...t},l)=>e.jsx("tbody",{ref:l,className:i("[&_tr:last-child]:border-0",s),...t}));X.displayName="TableBody";const Te=r.forwardRef(({className:s,...t},l)=>e.jsx("tfoot",{ref:l,className:i("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...t}));Te.displayName="TableFooter";const F=r.forwardRef(({className:s,...t},l)=>e.jsx("tr",{ref:l,className:i("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...t}));F.displayName="TableRow";const m=r.forwardRef(({className:s,...t},l)=>e.jsx("th",{ref:l,className:i("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...t}));m.displayName="TableHead";const x=r.forwardRef(({className:s,...t},l)=>e.jsx("td",{ref:l,className:i("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...t}));x.displayName="TableCell";const Ce=r.forwardRef(({className:s,...t},l)=>e.jsx("caption",{ref:l,className:i("mt-4 text-sm text-muted-foreground",s),...t}));Ce.displayName="TableCaption";const _=r.forwardRef(({className:s,children:t,...l},h)=>e.jsxs(K,{ref:h,className:i("relative overflow-hidden",s),...l,children:[e.jsx(te,{className:"h-full w-full rounded-[inherit]",children:t}),e.jsx(q,{}),e.jsx(le,{})]}));_.displayName=K.displayName;const q=r.forwardRef(({className:s,orientation:t="vertical",...l},h)=>e.jsx(M,{ref:h,orientation:t,className:i("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...l,children:e.jsx(re,{className:"relative flex-1 rounded-full bg-border"})}));q.displayName=M.displayName;function Fe(){const[s,t]=r.useState(25e4),[l,h]=r.useState(4.5),[N,P]=r.useState(30),[G,J]=r.useState(0),[Q,W]=r.useState(0),[y,Z]=r.useState(0),[v,I]=r.useState([]),[d,k]=r.useState({});r.useEffect(()=>{ee()},[s,l,N]);const ee=()=>{const a={};if(s<=0&&(a.loanAmount="Loan amount must be greater than 0"),l<0&&(a.interestRate="Interest rate cannot be negative"),N<=0&&(a.loanTerm="Loan term must be greater than 0"),k(a),Object.keys(a).length>0){I([]);return}const n=s,g=l/100/12,u=N*12;let j;if(g===0)j=n/u;else{const o=Math.pow(1+g,u);j=n*g*o/(o-1)}J(j),W(j*u),Z(j*u-n);const D=[];let p=n;for(let o=1;o<=u;o++){const z=p*g,E=j-z;p=p-E,o===u&&p<0&&(p=0),D.push({payment:o,principal:E,interest:z,balance:p,month:(o-1)%12+1,year:Math.floor((o-1)/12)+1})}I(D)},ae=()=>{t(25e4),h(4.5),P(30),k({})},c=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(a),B=[{name:"Principal",value:s,color:"#3B82F6"},{name:"Interest",value:y,color:"#EF4444"}],se=()=>{const a={};return v.forEach(n=>{a[n.year]||(a[n.year]={year:n.year,principal:0,interest:0}),a[n.year].principal+=n.principal,a[n.year].interest+=n.interest}),Object.values(a).slice(0,10)};return e.jsx("div",{className:"w-full max-w-6xl mx-auto p-4 space-y-6","data-testid":"amortization-calculator",children:e.jsxs(f,{children:[e.jsxs(w,{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[e.jsx(ne,{className:"h-8 w-8 text-primary"}),e.jsx(T,{className:"text-2xl font-bold",children:"Amortization Calculator"})]}),e.jsx(xe,{children:"Calculate monthly payments and view a complete amortization schedule showing principal and interest breakdown"})]}),e.jsx(b,{children:e.jsxs(he,{defaultValue:"calculator",className:"w-full",children:[e.jsxs(ue,{className:"grid w-full grid-cols-3",children:[e.jsx(C,{value:"calculator",children:"Calculator"}),e.jsx(C,{value:"schedule",children:"Schedule"}),e.jsx(C,{value:"charts",children:"Charts"})]}),e.jsx(R,{value:"calculator",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(A,{htmlFor:"loan-amount",className:"flex items-center space-x-2",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{children:"Loan Amount"})]}),e.jsx(S,{id:"loan-amount",type:"number",value:s,onChange:a=>t(parseFloat(a.target.value)||0),placeholder:"250000","data-testid":"input-loan-amount"}),d.loanAmount&&e.jsx("p",{className:"text-sm text-red-500",children:d.loanAmount})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(A,{htmlFor:"interest-rate",className:"flex items-center space-x-2",children:[e.jsx(ie,{className:"h-4 w-4"}),e.jsx("span",{children:"Annual Interest Rate (%)"})]}),e.jsx(S,{id:"interest-rate",type:"number",step:"0.1",value:l,onChange:a=>h(parseFloat(a.target.value)||0),placeholder:"4.5","data-testid":"input-interest-rate"}),d.interestRate&&e.jsx("p",{className:"text-sm text-red-500",children:d.interestRate})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(A,{htmlFor:"loan-term",className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:"Loan Term (Years)"})]}),e.jsx(S,{id:"loan-term",type:"number",value:N,onChange:a=>P(parseFloat(a.target.value)||0),placeholder:"30","data-testid":"input-loan-term"}),d.loanTerm&&e.jsx("p",{className:"text-sm text-red-500",children:d.loanTerm})]}),e.jsxs(L,{onClick:ae,variant:"outline",className:"w-full","data-testid":"button-reset",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Reset"]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsx(f,{children:e.jsxs(b,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-primary","data-testid":"result-monthly-payment",children:c(G)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Payment"})]})}),e.jsx(f,{children:e.jsxs(b,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600","data-testid":"result-total-payment",children:c(Q)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Payment"})]})}),e.jsx(f,{children:e.jsxs(b,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600","data-testid":"result-total-interest",children:c(y)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Interest"})]})})]}),Object.keys(d).length===0&&v.length>0&&e.jsx(je,{className:"mt-4",children:e.jsxs(pe,{children:["Over ",N," years, you'll pay ",c(y)," in interest (",(y/s*100).toFixed(1),"% of the loan amount)."]})})]})]})}),e.jsxs(R,{value:"schedule",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Amortization Schedule"}),e.jsxs(L,{variant:"outline",size:"sm",children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Export"]})]}),e.jsx(_,{className:"h-96 w-full border rounded-md",children:e.jsxs(U,{children:[e.jsx(V,{children:e.jsxs(F,{children:[e.jsx(m,{children:"Payment #"}),e.jsx(m,{children:"Date"}),e.jsx(m,{children:"Payment"}),e.jsx(m,{children:"Principal"}),e.jsx(m,{children:"Interest"}),e.jsx(m,{children:"Balance"})]})}),e.jsx(X,{children:v.map((a,n)=>e.jsxs(F,{children:[e.jsx(x,{children:a.payment}),e.jsxs(x,{children:[a.month,"/",a.year]}),e.jsx(x,{children:c(a.principal+a.interest)}),e.jsx(x,{className:"text-blue-600",children:c(a.principal)}),e.jsx(x,{className:"text-red-600",children:c(a.interest)}),e.jsx(x,{children:c(a.balance)})]},n))})]})})]}),e.jsx(R,{value:"charts",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(f,{children:[e.jsx(w,{children:e.jsx(T,{children:"Principal vs Interest"})}),e.jsx(b,{children:e.jsx(H,{width:"100%",height:300,children:e.jsxs(fe,{children:[e.jsx(be,{data:B,cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",dataKey:"value",label:({name:a,percent:n})=>`${a} ${(n*100).toFixed(0)}%`,children:B.map((a,n)=>e.jsx(Ne,{fill:a.color},`cell-${n}`))}),e.jsx(O,{formatter:a=>c(Number(a))}),e.jsx(Y,{})]})})})]}),e.jsxs(f,{children:[e.jsx(w,{children:e.jsx(T,{children:"Yearly Payment Breakdown"})}),e.jsx(b,{children:e.jsx(H,{width:"100%",height:300,children:e.jsxs(ye,{data:se(),children:[e.jsx(ge,{strokeDasharray:"3 3"}),e.jsx(ve,{dataKey:"year"}),e.jsx(we,{tickFormatter:a=>`$${(a/1e3).toFixed(0)}k`}),e.jsx(O,{formatter:a=>c(Number(a))}),e.jsx(Y,{}),e.jsx($,{dataKey:"principal",stackId:"a",fill:"#3B82F6",name:"Principal"}),e.jsx($,{dataKey:"interest",stackId:"a",fill:"#EF4444",name:"Interest"})]})})})]})]})})]})})]})})}export{Fe as AmortizationCalculator,Fe as default};
